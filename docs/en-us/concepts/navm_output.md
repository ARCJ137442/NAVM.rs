# NAVM Output `Output`

[🔙Concept](./doc.md)

[📃Source Code](./../../../src/output/mod.rs)

📍Last Updated: 【2024-04-10 10:54:45】

- 🎯Used to standardize CIN output
  - 📄Such as 'Derivation', 'Answer', 'Error', 'Operation'

## Categories and Semantics

📍Last Updated: 【2024-04-10 10:54:51】

### General Principles of Classification

The NAVM output has various types of outputs, designed according to the following principles:

- 📌**Universal**: Commonly present in various main CIN versions (in some semantically common form)
- 📌**Complete**: Can retain all types of outputs of the original CIN without loss (generally used for existing CINs that have been constructed)
- 📌**User-friendly**: Can conveniently extract NARS-related information such as 'contained Narsese' and 'output NARS operations' in a [unified format](./common_narsese.md)

### Specific Categories

📍Last Updated: 【2024-04-10 11:00:04】

Based on the above [principles](#General Principles of Classification), the NAVM output is classified as follows:

(Use '✏️' to represent field names, '📄' to represent CIN output examples)

#### **`IN`**

Echo of the Narsese input by CIN

- ✏️Raw Content: String
- ✏️Contained Narsese: Lexical Narsese (may not have)
- 📄ONA: `Input: <A --> B>. Priority=1.000000 Truth: frequency=1.000000, confidence=0.900000`

#### **`OUT`**

CIN outputs a line of Narsese, generally for export conclusions, intermediate reasoning results

- ✏️Raw Content: String
- ✏️Contained Narsese: Lexical Narsese (may not have)
- 📄OpenNARS: `OUT: <A1 --> A2>. %1.00;0.90% {3404 : (-6241115378434429522,0)}`
- 📄ONA: `Derived: <A --> C>. Priority=0.407250 Truth: frequency=1.000000, confidence=0.810000`

#### **`ERROR`**

Errors generated during the internal operation of CIN, unrelated to the upper-level interface

- ✏️Description: String
- 📄OpenNARS: `ERR: java.lang.ClassCastException: class org.opennars.language.Term cannot be cast to class org.opennars.language.CompoundTerm (org.opennars.language.Term and org.opennars.language.CompoundTerm are in unnamed module of loader 'app')`

#### **`ANSWER`**

The 'answer' generated by CIN for the 'question' in the input, corresponding to the 'system presents existing experience' at the NARS level

- ✏️Raw Content: String
- ✏️Narsese: Lexical Narsese (may not have)
- 📄OpenNARS: `Answer: <B --> C>. %1.00;0.81% {11778 : (-5483911157924289284,1);(-5483911157924289284,0)}`

#### **`ACHIEVED`**

The 'response' generated by CIN for the 'goal' in the input, corresponding to the 'system (currently) completes existing goals' at the NARS level

- ✏️Raw Content: String
- ✏️Narsese: Lexical Narsese (may not have)
- 📄PyNARS: `ACHIEVED: A. :|: %1.000:0.900%`

#### **`EXE`**

CIN outputs an 'operation' in the sense of NAL-8, indicating a 'call to an external process'

- ✏️Raw Content: String
- ✏️Operation: NARS Operation
  - ✏️Operator Name: String | 📄Like `left`, without the syntactic sharp sign
  - ✏️Operation Parameters: Array of Lexical Narsese Terms | array of String
- 📄OpenNARS: `EXE: $0.00;0.04;0.55$ ^left([{SELF}, (*,P1,P2)])=null`
  - Operator Name: `left`
  - Operation Parameters: `["{SELF}", "(*,P1,P2)"]`

#### **`INFO`**

CIN outputs a piece of information unrelated to Narsese

- ✏️Message: String
- 📄PyNARS: `INFO  : Loading RuleMap <LUT.pkl>...`

#### **`COMMENT`**

CIN outputs a comment or log information, more abundant but also more trivial than `INFO`; commonly used for runtime debugging, or when executing the `REM` instruction in [NAVM Instructions](./navm_cmd.md)

- ✏️Content: String

#### **`TERMINATED`**

CIN stops running, seen in cases where 'CIN actively ends the operation'

- ✏️Description: String
- 📄ONA:`Parsing error: Punctuation has to be belief . goal ! or question ?` (Line break) `Test failed.`

#### **`UNCLASSIFIED`**

Outputs with recognizable 'output types' that are not within the standard 'NAVM output' range

- ✏️Category: String | Actually serves as an identifier for 'type'
- ✏️Content: String | The original content of the output
- ✏️Narsese: Lexical Narsese (may not have) | Narsese that may be included in the output
- 📄OpenNARS: `ANTICIPATE: <{SELF} --> [satisfied]>` (ANTICIPATE)
- 📄ONA: `decision expectation=0.507988 implication: <(<a --> b> &/ <(* {SELF}) --> ^left>) =/> <{SELF} --> [good]>>. Truth: frequency=0.992043 confidence=0.237070 dt=12.000000 precondition: <a --> b>. :|: Truth: frequency=1.000000 confidence=0.900000 occurrenceTime=171` (ANTICIPATE)

#### **`OTHER`**

Other CIN outputs that are not classified, do not contain important Narsese, NARS operation information

- ✏️Content: String
- 📄OpenNARS: `[l]: attaching Shell to Nar...`
- 📄OpenNARS: `Executed based on: $0.2680;0.0862;0.5836$ <(&/,<{#1} --> [seen]>,+10,<{#1} --> [seen]>,+62817,(^right,{SELF}),+19485) =/> <{SELF} --> [satisfied]>>. %0.75;0.33%`
- 📄PyNARS: `Setup: Changing random seed=137..`

For more details, please refer to the definition of [`Output`](https://github.com/ARCJ137442/NAVM.rs/blob/main/src/output/structs.rs) in the source code.

## JSON Format

📍Last Updated: 【2024-04-10 12:28:34】

The 'NAVM Output' refines and compresses the 'Output' type defined in [the above](#specific-categories) into the following **four attributes**:

- ✏️Type `type`: String | The [category](#specific-categories) of the output
- ✏️Content `content`: String | The original content of the output
- ✏️Narsese `narsese`: String (optional) | The Narsese contained in the output (following the ASCII [CommonNarsese](./common_narsese.md) syntax)
- ✏️Operation `operation`: Array of Strings (optional) | The 'NARS operation' information contained in the output

Table:

| Name | Field Name | Field Type | Rust Type | Description |
|:--|:--|:--|:--|:--|
| Type | `type` | String | `String` | The [category](#specific-categories) of the output |
| Content | `content` | Array of Strings | `Vec<String>` | The original content of the output |
| Narsese | `narsese` | String (optional) | `Option<String>` | The Narsese contained in the output (following the ASCII [CommonNarsese](./common_narsese.md) syntax) |
| Operation | `operation` | Array of Strings (optional) | `Option<Vec<String>>` | The 'NARS operation' information contained in the output (if any, must be non-empty) |

From this, the following TypeScript definition is summarized:

```typescript
export type NARSOutput = {
    /** The category of the output (in ALL CAPS) */
    type: string
    /** The (original) content of the output, may omit category information */
    content: string
    /** If the output contains recognized Narsese, it is the corresponding Narsese string */
    narsese?: string
    /** If the output contains recognized NARS operations, it is an array of strings `[operation name without sharp, ...operation parameters]` */
    operation?: [string, ...string[]]
}
```

For further reference, see the definition of [`OutputJSON`](https://github.com/ARCJ137442/NAVM.rs/blob/main/src/output/conversion.rs) in the source code.
